{% extends "base.html" %}
{% block content %}
<h3>Order Parts Tracker</h3>

<form method="get" class="mb-3 d-flex gap-2">
  <input name="q" value="{{ q }}" class="form-control" placeholder="Search by Technician or Order #">
  <button class="btn btn-primary">Search</button>
</form>

<table class="table table-striped table-sm">
  <thead><tr>
    <th>Order #</th><th>Technician</th><th>Supplier</th>
    <th>Part #</th><th>Name</th><th>Qty</th><th>Status</th><th>Actions</th>
  </tr></thead>
  <tbody>
  {% for i in items %}
    <tr>
      <td>{{ i.order_number }}</td>
      <td>{{ i.technician }}</td>
      <td>{{ i.supplier }}</td>
      <td>{{ i.part_number }}</td>
      <td>{{ i.part_name }}</td>
      <td>{{ i.qty_ordered }}</td>
      <td>
        {% if i.status == 'received' %}
          <span class="badge bg-success">received</span>
        {% else %}
          <span class="badge bg-warning text-dark">{{ i.status }}</span>
        {% endif %}
      </td>
      <td>
        {% if i.status != 'received' %}
        <form method="post" action="{{ url_for('inventory.mark_received', item_id=i.id) }}">
          <button class="btn btn-sm btn-success">Mark received</button>
        </form>
        {% else %} â€” {% endif %}
      </td>
    </tr>
  {% endfor %}
  </tbody>
</table>
{% endblock %}
