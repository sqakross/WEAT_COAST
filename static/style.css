/* =========================
   Base layout + helpers
   ========================= */
body{
  font-family: Arial, sans-serif;
  background-color:#f6f6f6;
  padding:20px;
  margin:0;
}

.navbar{ z-index:1200; }
.navbar .dropdown-menu{ z-index:1300; }

/* Флэши */
#messages li{ padding:10px; margin-bottom:10px; border-radius:4px; }
#messages li.success{ background:#c6f6d5; color:#22543d; }
#messages li.danger{  background:#fed7d7; color:#742a2a; }

/* Общие таблицы */
table{ width:100%; border-collapse:collapse; margin-top:20px; }
table th, table td{ padding:10px; border:1px solid #ddd; text-align:left; }

/* Числа ровно по правому краю */
.num-cell,
.text-end input.form-control{
  text-align:right;
  font-variant-numeric: tabular-nums;
}

/* =========================
   ВАЖНО: глобальные инпуты (не ломаем чекбоксы)
   ========================= */
form input:not([type="checkbox"]):not([type="radio"]):not(.form-check-input),
form select,
form textarea{
  width: 100%;
  box-sizing: border-box;
}

/* ===== Жёсткий reset для чекбоксов (видимость и клик) ===== */
input[type="checkbox"],
.form-check-input{
  width: 1.05rem !important;
  height: 1.05rem !important;
  display: inline-block !important;
  vertical-align: middle !important;
  appearance: auto !important;
  -webkit-appearance: checkbox !important;
  -moz-appearance: checkbox !important;
  background: initial !important;
  border: initial !important;
  opacity: 1 !important;
  pointer-events: auto !important;
  cursor: pointer !important;
}

/* Когда реально disabled — это видно */
input[type="checkbox"][disabled],
.form-check-input[disabled]{
  opacity:.6 !important;
  cursor:not-allowed !important;
}

/* =========================
   Work Order (multi-appliance)
   ========================= */
.col-narrow{ width:90px; }
.col-money { width:90px; text-align:right; }
.col-qty   { width:64px;  text-align:right; }
.col-issue { width:60px;  text-align:center; }

.wo-form .unit-table{
  table-layout:fixed;
  font-size:.9rem;
}
.wo-form .unit-table th,
.wo-form .unit-table td{
  padding:.35rem .45rem;
  vertical-align:middle;
}

/* Контролы в строках таблицы — одинаковая высота */
.wo-form .unit-table .form-control,
.wo-form .unit-table .form-select{
  height:1.85rem;
  line-height:1.35;
  padding:.2rem .4rem;
  font-size:.9rem;
}

/* Псевдо-инпут для суммы */
.ro-input{
  display:flex;
  align-items:center;
  height:1.85rem;
  padding:.2rem .4rem;
  border:1px solid transparent;
  font-size:.9rem;
  line-height:1.35;
}

.unit-subtotal, #grandTotal{ font-variant-numeric: tabular-nums; font-weight:600; }
.hint{ font-weight:600; font-size:.85rem; white-space:nowrap; }

/* Шапка таблицы не перехватывает клики */
.wo-form .unit-table thead th{
  position: static !important;
  z-index: auto !important;
  pointer-events: none;
}

/* Ячейки и чекбоксы поверх/кликабельны */
.wo-form .unit-table td{ position:relative; overflow:visible; }
.wo-form .unit-table td.col-issue,
.wo-form .unit-table td.issue-cell{ text-align:center; }

.wo-form .unit-table .form-check-input.issue-check{
  position: relative;
  z-index: 3;
  pointer-events: auto !important;
  opacity: 1 !important;
  cursor: pointer;
}

/* На всякий случай, если родителю навешены .disabled или .pe-none */
.wo-form .unit-table .form-check.disabled .form-check-input.issue-check:not([disabled]),
.wo-form .unit-table .form-check-input.issue-check.pe-none:not([disabled]){
  pointer-events: auto !important;
}

/* =========================
   Reports (минимум)
   ========================= */
.reports-grouped .report-table-wrap .table{ font-size:.875rem; }
.reports-grouped .report-table-wrap .table td,
.reports-grouped .report-table-wrap .table th{
  vertical-align:middle; padding:.40rem .50rem; line-height:1.35; white-space:nowrap;
}
.reports-grouped .report-table-wrap .table input,
.reports-grouped .report-table-wrap .table select{
  font-size:.875rem !important; line-height:1.35 !important; height:1.8rem !important;
  padding:.25rem .45rem !important; box-sizing:border-box;
}
.reports-grouped .table-sticky thead th{ position:sticky; top:0; z-index:1; background:#f8f9fa; }

/* =========================================================
   TABLET TECHNICIAN MODE
   Покрывает Samsung Tab S8+ (ландшафт ~1280px) и похожие.
   Активируется ТОЛЬКО если:
     <body class="role-technician">  (мы это уже сделали в base.html)
   ========================================================= */

@media (min-width: 768px) and (max-width: 1400px) {

    /* тех-панель сверху: фиксированная */
  body.role-technician .tech-toolbar {
    display: block !important;

    position: fixed;
    left: 0;
    right: 0;
    top: 0;

    background: #0a1a2d;
    color: #fff;
    border-bottom: 2px solid #222;
    box-shadow:
      0 2px 4px rgba(0,0,0,.7),
      0 8px 24px rgba(0,0,0,.6),
      inset 0 1px 0 rgba(255,255,255,.08);

    z-index: 4000;
  }

  body.role-technician .tech-toolbar-inner {
    display: flex;
    flex-wrap: nowrap;
    justify-content: space-around;
    align-items: stretch;
    gap: .75rem;
    padding: .75rem .75rem;
  }

  /* большие читабельные кнопки сверху */
  body.role-technician .tech-toolbar-inner .btn-tech-nav {
    font-size: 1.1rem;
    font-weight: 600;
    line-height: 1.2;
    background: #fff;
    color: #0a1a2d;
    border: 1px solid rgba(0,0,0,.6);
    border-radius: 0.9rem;
    padding: 1rem 1.1rem;
    min-width: 30%;
    flex: 1 1 auto;
    text-align: center;
    text-decoration: none;
    box-shadow:
      0 2px 4px rgba(0,0,0,.8),
      0 6px 16px rgba(0,0,0,.8),
      inset 0 1px 0 rgba(255,255,255,.9);
  }
  body.role-technician .tech-toolbar-inner .btn-tech-nav:active {
    filter: brightness(1.05);
  }



  /* --- 2. ГЛОБАЛЬНЫЕ РАЗМЕРЫ ДЛЯ ПАЛЬЦА --- */

    body.role-technician {
    font-size: 1.15rem;
    line-height: 1.4;

    /* контент не лезет под фиксированную верхнюю панель и нижний футер */
    padding-top: 5.5rem;
    padding-right: 16px;
    padding-left: 16px;
    padding-bottom: 7rem; /* мы это уже делали для нижнего футера */
  }


  /* таблицы и заголовки внутри таблиц делаем читабельнее */
  body.role-technician table {
    font-size: 1.05rem;
  }

  body.role-technician th {
    font-size: .9rem;
    letter-spacing: .02em;
  }

  /* кнопки, инпуты, селекты — крупнее зона нажатия */
  body.role-technician .btn,
  body.role-technician button,
  body.role-technician .form-control,
  body.role-technician .form-select {
    font-size: 1.1rem !important;
    padding: 0.9rem 1rem !important;
    border-radius: 0.75rem !important;
    line-height: 1.3 !important;
  }

  /* чекбоксы подтверждения = большой палец */
  body.role-technician input[type="checkbox"],
  body.role-technician .form-check-input,
  body.role-technician .tech-confirm {
    width: 1.5rem !important;
    height: 1.5rem !important;
  }

  /* текст строки выданных деталей в Issued Batches:
     не в одну тонкую линию, а нормальный перенос */
  body.role-technician .inv-item {
    font-size: 1.05rem;
    line-height: 1.4;
    white-space: normal;
    word-break: break-word;
  }

  /* кол-во / цена выровнять красиво и не слишком мелко */
  body.role-technician .inv-item .num,
  body.role-technician td.num,
  body.role-technician .num-cell {
    font-size: 1.05rem;
  }

  /* хэдеры "Issued Items", "Issued Batches" и т.д. могут быть чуть крупнее */
  body.role-technician h5,
  body.role-technician h3 {
    font-size: 1.35rem;
    line-height: 1.3;
    font-weight: 600;
  }

  /* блок с техом / jobs / статусом вверху wo_detail */
  body.role-technician .row.g-3.mb-4.small {
    font-size: 1.05rem;
    line-height: 1.4;
  }
  body.role-technician .row.g-3.mb-4.small code {
    font-size: 1rem;
  }

  /* кнопка Copy возле job(s) тоже должна быть не микро */
  body.role-technician #copyJobs.btn {
    font-size: 1rem !important;
    padding: 0.6rem 0.8rem !important;
    border-radius: 0.6rem !important;
    line-height: 1.2 !important;
  }

  /* --- 3. ГОТОВИМ МЕСТО ПОД ФИКСИРОВАННЫЙ НИЖНИЙ БАР (tech-sticky-footer) --- */

  /* На планшете у техника мы будем показывать панель действий снизу
     (Print, Back, и т.д.). Чтобы контент не уехал под неё, дадим паддинг. */
  body.role-technician {
    padding-bottom: 7rem; /* место для футера кнопок */
  }

  /* сам футер будет position:fixed; bottom:0 позже в wo_detail.html.
     Здесь заранее опишем стили (ничего не сломает на других страницах). */
  body.role-technician .tech-sticky-footer {
    position: fixed;
    left: 0;
    right: 0;
    bottom: 0;

    background-color: #0a1a2d;
    border-top: 2px solid #222;
    box-shadow:
      0 -2px 4px rgba(0,0,0,.8),
      0 -8px 24px rgba(0,0,0,.6),
      inset 0 1px 0 rgba(255,255,255,.08);

    padding: 0.75rem;
    display: flex;
    justify-content: space-around;
    align-items: center;
    gap: 0.75rem;
    z-index: 3000;
  }

  body.role-technician .tech-sticky-footer .btn-tech-action {
    background: #fff;
    color: #0a1a2d;
    border: 1px solid rgba(0,0,0,.6);
    border-radius: 1rem;
    padding: 1rem 1.25rem;
    min-width: 40%;
    text-align: center;
    font-size: 1.15rem;
    font-weight: 600;
    line-height: 1.2;
    text-decoration: none;
    box-shadow:
      0 2px 4px rgba(0,0,0,.8),
      0 6px 16px rgba(0,0,0,.8),
      inset 0 1px 0 rgba(255,255,255,.9);
  }

  body.role-technician .tech-sticky-footer .btn-tech-action:active {
    filter: brightness(1.05);
  }

} /* end @media */





